/**
 * Copyright 2017 Gwenael Pluchon
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue-svg-pan-zoom")):"function"==typeof define&&define.amd?define(["exports","vue-svg-pan-zoom"],e):e(t["vue-diagrams"]={},t.vueSvgPanZoom)}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function o(t,e){return t(e={exports:{}},e.exports),e.exports}e=e&&e.hasOwnProperty("default")?e.default:e;var i=o(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),r=o(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),s=(r.version,function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,i){return t.call(e,n,o,i)}}return function(){return t.apply(e,arguments)}}),a=function(t){return"object"==typeof t?null!==t:"function"==typeof t},d=function(t){if(!a(t))throw TypeError(t+" is not an object!");return t},u=function(t){try{return!!t()}catch(t){return!0}},l=!u(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),c=i.document,f=a(c)&&a(c.createElement),h=!l&&!u(function(){return 7!=Object.defineProperty((t="div",f?c.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),m=Object.defineProperty,p={f:l?Object.defineProperty:function(t,e,n){if(d(t),e=function(t,e){if(!a(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!a(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!a(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!a(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}(e,!0),d(n),h)try{return m(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},y=l?function(t,e,n){return p.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,n))}:function(t,e,n){return t[e]=n,t},g={}.hasOwnProperty,v=function(t,e){return g.call(t,e)},x=function(t,e,n){var o,a,d,u=t&x.F,l=t&x.G,c=t&x.S,f=t&x.P,h=t&x.B,m=t&x.W,p=l?r:r[e]||(r[e]={}),g=p.prototype,w=l?i:c?i[e]:(i[e]||{}).prototype;for(o in l&&(n=e),n)(a=!u&&w&&void 0!==w[o])&&v(p,o)||(d=a?w[o]:n[o],p[o]=l&&"function"!=typeof w[o]?n[o]:h&&a?s(d,i):m&&w[o]==d?function(t){var e=function(e,n,o){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,o)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(d):f&&"function"==typeof d?s(Function.call,d):d,f&&((p.virtual||(p.virtual={}))[o]=d,t&x.R&&g&&!g[o]&&y(g,o,d)))};x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128;var w=x;w(w.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}});var k=r.Math.trunc,_=n(o(function(t){t.exports={default:k,__esModule:!0}})),P=r.JSON||(r.JSON={stringify:JSON.stringify}),S=function(t){return P.stringify.apply(P,arguments)},b=n(o(function(t){t.exports={default:S,__esModule:!0}})),D=n(o(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}));w(w.S+w.F*!l,"Object",{defineProperty:p.f});var I=r.Object,E=function(t,e,n){return I.defineProperty(t,e,n)},L=o(function(t){t.exports={default:E,__esModule:!0}});n(L);var T=n(o(function(t,e){e.__esModule=!0;var n,o=(n=L)&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(t,i.key,i)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}()})),N=function(){return _(1e3*Math.random())},M=function(){function t(e,n,o,i,r,s){D(this,t),this.title=n,this.x=o,this.y=i,this.width=r,this.height=s,this.ports=[]}return T(t,[{key:"addInPort",value:function(t){var e={id:N(),type:"in",name:t};return this.ports.push(e),e.id}},{key:"addOutPort",value:function(t){var e={id:N(),type:"out",name:t};return this.ports.push(e),e.id}}]),t}(),F=function(){return _(1e3*Math.random())},O=function(){function t(){D(this,t),this._model={nodes:[],links:[]}}return T(t,[{key:"addNode",value:function(t,e,n,o,i){var r=new M(F(),t,e,n,o,i);return this._model.nodes.push(r),r}},{key:"deleteNode",value:function(t){for(var e=this._model.nodes.indexOf(t),n=0;n<this._model.links.length;n++)for(var o=this._model.links[n],i=0;i<t.ports.length;i++){var r=t.ports[i];o.from!==r.id&&o.to!==r.id||(this.deleteLink(o),n--)}this._model.nodes.splice(e,1)}},{key:"deleteLink",value:function(t){var e=this._model.links.indexOf(t);this._model.links.splice(e,1)}},{key:"addLink",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this._model.links.push({id:F(),from:t,to:e,positionFrom:{},positionTo:{},points:n})}},{key:"serialize",value:function(){return b(this._model)}},{key:"deserialize",value:function(t){this._model=JSON.parse(t)}}]),t}();!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e)}}();var C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{x:t.x,y:t.y}},[n("rect",{staticClass:"node-dark-background",attrs:{fill:t.color,stroke:"#000000","stroke-width":t.selected?2:0,x:"5",y:"15",rx:"3",ry:"3",width:t.width,height:t.height}}),t._v(" "),n("svg",{attrs:{x:"0",y:"0"},on:{mousedown:t.mouseDown,mouseenter:t.mouseenter,mouseleave:t.mouseleave}},[n("rect",{staticClass:"node-dark-background",attrs:{fill:"#000000","fill-opacity":t.titleFillOpacity,x:"7",y:"17",rx:"3",ry:"3",width:t.width-4,height:"16"}}),t._v(" "),n("text",{attrs:{x:10,y:30,"font-size":"14","font-weight":"bold",fill:"#000000"},on:{click:t.clickedOn}},[t._v(t._s(t.title)+" - ZZ")]),t._v(" "),t.deletable?n("g",{on:{click:t.deleteNode}},[n("rect",{attrs:{x:t.width-12,y:"18",width:"14",height:"14",rx:"2",ry:"2",fill:"#ffffff","fill-opacity":.25}}),t._v(" "),n("line",{staticStyle:{stroke:"rgb(0,0,0)"},attrs:{x1:t.width,y1:20,x2:t.width-10,y2:30,"stroke-width":"2"}}),t._v(" "),n("line",{staticStyle:{stroke:"rgb(0,0,0)"},attrs:{x1:t.width-10,y1:20,x2:t.width,y2:30,"stroke-width":"2"}})]):t._e()]),t._v(" "),n("rect",{staticClass:"node-light-background",attrs:{fill:"#ffffff",x:"7",y:"35",rx:"3",ry:"3",width:t.width-4,height:t.height-22}}),t._v(" "),t._t("default")],2)},staticRenderFns:[],name:"DiagramNode",props:{title:{type:String,required:!0},index:Number,ports:{type:Array,default:function(){return[]}},x:Number,y:Number,width:{type:Number,default:72},height:{type:Number,default:100},color:{type:String,default:"#66cc00"},deletable:{type:Boolean,default:!0},selected:Boolean},data:function(){return{nodeStrokeWidth:0,titleFillOpacity:.25}},methods:{deleteNode:function(){this.$emit("delete")},mouseDown:function(t){this.$emit("onStartDrag",{type:"nodes",index:this.index},t.x-this.x,t.y-this.y)},mouseenter:function(){this.titleFillOpacity=.5},mouseleave:function(){this.titleFillOpacity=.25},clickedOn:function(){console.log("CLICKED"),this.title="555"}}};!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e)}}();!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e)}}();var $={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[t.points&&t.points.length?n("g",{on:{mouseenter:t.mouseEnter,mouseleave:t.mouseLeave,mousedown:t.mouseDown}},[t._l(t.points,function(e,o){return n("g",{on:{mousedown:function(e){t.mouseDownSegment(e,o)}}},[n("line",{style:t.largeStrokeStyle,attrs:{x1:0===o?t.x1:t.points[o-1].x,y1:0===o?t.y1:t.points[o-1].y,x2:e.x,y2:e.y,"stroke-width":"8"}}),t._v(" "),n("line",{staticStyle:{stroke:"rgb(0,0,0)"},attrs:{x1:0===o?t.x1:t.points[o-1].x,y1:0===o?t.y1:t.points[o-1].y,x2:e.x,y2:e.y,"stroke-width":"2"}})])}),t._v(" "),n("g",{on:{mousedown:function(e){t.mouseDownSegment(e,t.points.length)}}},[n("line",{style:t.largeStrokeStyle,attrs:{x1:t.points[t.points.length-1].x,y1:t.points[t.points.length-1].y,x2:t.x2,y2:t.y2,"stroke-width":"8"}}),t._v(" "),n("line",{staticStyle:{stroke:"rgb(0,0,0)"},attrs:{x1:t.points[t.points.length-1].x,y1:t.points[t.points.length-1].y,x2:t.x2,y2:t.y2,"stroke-width":"2"}})])],2):n("g",{on:{mouseenter:t.mouseEnter,mouseleave:t.mouseLeave,mousedown:t.mouseDown}},[n("g",{on:{mousedown:function(e){t.mouseDownSegment(e,0)}}},[n("path",{style:t.largeStrokeStyle,attrs:{d:t.curve,"stroke-width":"8",fill:"none"}}),t._v(" "),n("path",{staticStyle:{stroke:"rgb(0,0,0)"},attrs:{d:t.curve,"stroke-width":"2",fill:"none"}})])]),t._v(" "),t._l(t.points,function(e,o){return n("DiagramPoint",{attrs:{x:e.x,y:e.y},on:{mouseenter:function(n){t.mouseEnterPoint(e)},mouseleave:function(n){t.mouseLeavePoint(e)},mousedown:function(e){t.mouseDownPoint(e,o)}}})})],2)},staticRenderFns:[],name:"DiagramLink",props:["positionFrom","positionTo","id","index","points"],components:{DiagramPoint:{render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("circle",{style:t.hover?"stroke:rgba(255,0,0,0.5);":"stroke:rgba(255,0,0,0.0);",attrs:{"stroke-width":"6",cx:t.x,cy:t.y,r:"5",fill:"black"},on:{mouseenter:t.mouseEnter,mouseleave:t.mouseLeave,mousedown:function(e){t.$emit("mousedown",e)}}})},staticRenderFns:[],name:"DiagramPoint",props:["x","y"],data:function(){return{hover:!1}},methods:{mouseEnter:function(){this.hover=!0},mouseLeave:function(){this.hover=!1}}}},data:function(){return{largeStrokeStyle:"stroke:rgba(255,0,0,0.0);",pointStyleNormal:"stroke:rgba(255,0,0,0.0); stroke-width: 6",pointStyleHover:"stroke:rgba(255,0,0,0.5); stroke-width: 6"}},methods:{mouseEnter:function(){this.largeStrokeStyle="stroke:rgba(255,0,0,0.5);"},mouseLeave:function(){this.largeStrokeStyle="stroke:rgba(255,0,0,0.0);"},mouseDownPoint:function(t,e){console.log("mouseDownPoint",arguments),this.$emit("onStartDrag",{type:"points",linkIndex:this.index,pointIndex:e})},mouseDown:function(t){},mouseDownSegment:function(t,e){this.createPoint(t.x,t.y,e),this.mouseDownPoint(t,e)},createPoint:function(t,e,n){this.$emit("onCreatePoint",t,e,this.index,n)}},computed:{x1:function(){return this.positionFrom.x},y1:function(){return this.positionFrom.y-4},x2:function(){return this.positionTo.x-4},y2:function(){return this.positionTo.y-4},curve:function(){var t=_(this.positionFrom.x),e=_(this.positionFrom.y-4),n=_(this.positionTo.x-4),o=_(this.positionTo.y-4),i=_(4*Math.sqrt(Math.abs(t-n)));return"M"+t+","+e+" C"+(t+i)+","+e+" "+(n-i)+","+o+" "+n+","+o}}};!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e)}}();!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),n=" svg[data-v-ebfff91a]{ user-select: none; font-family: Helvetica; } ";e.type="text/css",e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),t.appendChild(e)}}();var Y=function(){return _(1e3*Math.random())};function j(t,e){return e*Math.round(t/e)}var B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("SvgPanZoom",{style:{width:t.width+"px",height:t.height+"px",border:"1px solid black"},attrs:{xmlns:"http://www.w3.org/2000/svg",zoomEnabled:t.zoomEnabled,id:"svgroot",panEnabled:t.panEnabled,controlIconsEnabled:!0,fit:!1,center:!0,viewportSelector:"#svgroot2",preventMouseEventsDefault:!1,beforePan:t.beforePan}},[n("svg",{ref:"dragramRoot",staticClass:"svg-content",attrs:{id:"svgroot2",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+t.width+" "+t.height,width:t.width,height:t.height,preserveAspectRatio:"xMinYMin meet"},on:{mousemove:t.mouseMove,mouseup:t.mouseUp}},[n("defs",[n("pattern",{attrs:{id:"smallGrid",width:"16",height:"16",patternUnits:"userSpaceOnUse"}},[n("path",{attrs:{d:"M 16 0 L 0 0 0 16",fill:"none",stroke:"gray","stroke-width":"0.5"}})]),t._v(" "),n("pattern",{attrs:{id:"grid",width:"80",height:"80",patternUnits:"userSpaceOnUse"}},[n("rect",{attrs:{width:"80",height:"80",fill:"url(#smallGrid)"}}),t._v(" "),n("path",{attrs:{d:"M 80 0 L 0 0 0 80",fill:"none",stroke:"gray","stroke-width":"1"}})])]),t._v(" "),n("rect",{ref:"grid",staticClass:"svg-pan-zoom_viewport",attrs:{x:"-5000px",y:"-5000px",width:"10000px",height:"10000px",fill:"url(#grid)"},on:{mousedown:t.clearSelection}}),t._v(" "),n("g",{ref:"viewPort",attrs:{id:"viewport",x:"50",y:"50"}},[t._l(t.model._model.links,function(e,o){return n("DiagramLink",{ref:"link-"+o,refInFor:!0,attrs:{positionFrom:e.positionFrom,positionTo:e.positionTo,points:e.points,id:e.id,index:o},on:{onStartDrag:t.startDragPoint,onCreatePoint:t.createPoint}})}),t._v(" "),t.newLink?n("line",{staticStyle:{stroke:"rgb(255,0,0)","stroke-width":"2"},attrs:{x1:t.getPortHandlePosition(t.newLink.startPortId).x,y1:t.getPortHandlePosition(t.newLink.startPortId).y,x2:t.convertXYtoViewPort(t.mouseX,0).x,y2:t.convertXYtoViewPort(0,t.mouseY).y}}):t._e(),t._v(" "),t._l(t.model._model.nodes,function(e,o){return n("DiagramNode",{ref:"node-"+o,refInFor:!0,attrs:{title:e.title,x:e.x,y:e.y,width:e.width,height:e.height,color:e.color,deletable:e.deletable,ports:e.ports,selected:"nodes"===t.selectedItem.type&&t.selectedItem.index===o,index:o},on:{onStartDrag:t.startDragItem,delete:function(n){t.model.deleteNode(e)}}},t._l(e.ports,function(i,r){return n("DiagramPort",{ref:"port-"+i.id,refInFor:!0,attrs:{id:i.id,nodeIndex:o,y:20*r,nodeWidth:e.width,type:i.type,name:i.name},on:{onStartDragNewLink:t.startDragNewLink,mouseUpPort:t.mouseUpPort}})}))})],2)])])],1)},staticRenderFns:[],_scopeId:"data-v-ebfff91a",name:"Diagram",Model:O,props:{model:{required:!0},width:{default:500},height:{default:500},gridSnap:{default:1}},data:function(){return this.updateLinksPositions(),{document:document,zoomEnabled:!0,panEnabled:!0,draggedItem:void 0,selectedItem:{},initialDragX:0,initialDragY:0,newLink:void 0,mouseX:0,mouseY:0}},components:{DiagramNode:C,DiagramLink:$,DiagramPort:{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",["in"===t.type?n("svg",{attrs:{y:t.y+55}},[n("rect",{ref:"handle",attrs:{fill:t.fill,x:"0",y:"0",rx:"3",ry:"3",width:"10",height:"10"},on:{mouseenter:t.enter,mouseleave:t.leave,mousedown:t.startDragNewLink,mouseup:t.mouseup}}),t._v(" "),n("text",{attrs:{x:"12",y:"9","font-size":"8pt",fill:"#000000"}},[t._v(t._s(t.name))])]):n("svg",{attrs:{y:t.y+55}},[n("rect",{ref:"handle",attrs:{fill:t.fill,x:t.nodeWidth,y:"0",rx:"3",ry:"3",width:"10",height:"10"},on:{mouseenter:t.enter,mouseleave:t.leave,mousedown:t.startDragNewLink,mouseup:t.mouseup}}),t._v(" "),n("text",{attrs:{x:t.nodeWidth-6,y:"9","text-anchor":"end","font-size":"8pt",fill:"#000000"}},[t._v(t._s(t.name))])])])},staticRenderFns:[],name:"DiagramPort",props:["id","y","type","name","nodeWidth","nodeIndex"],data:function(){return{fill:"#444444"}},methods:{mouseup:function(){this.$emit("mouseUpPort",this.id)},enter:function(){this.fill="#888888"},leave:function(){this.fill="#444444"},startDragNewLink:function(){this.$emit("onStartDragNewLink",this.id)}}},SvgPanZoom:e},methods:{convertXYtoViewPort:function(t,e){var n,o,i,r,s,a=document.getElementById("svgroot2"),d=document.getElementById("viewport"),u=a.createSVGPoint(),l=(n=a,o=document.documentElement,i=n.getBoundingClientRect(),r=o.scrollLeft,s=o.scrollTop,{x:i.left+r,y:i.top+s});u.x=t-l.x,u.y=e-l.y;var c=d.getCTM().inverse();return u.matrixTransform(c)},beforePan:function(){return!(this.selectedItem.type||this.draggedItem||this.newLink)},createPoint:function(t,e,n,o){var i=this.convertXYtoViewPort(t,e),r=this.model._model.links;void 0===r[n].points&&(r[n].points=[]);var s=r[n].points;s.splice(o,0,i),r[n].points=s},clearSelection:function(){this.selectedItem={}},updateLinksPositions:function(){var t=this,e=[];this.model&&this.model._model&&(e=this.model._model.links),this.$nextTick(function(){setTimeout(function(){for(var n=0;n<e.length;n++){var o;o=t.getPortHandlePosition(e[n].from),e[n].positionFrom={x:o.x,y:o.y},o=t.getPortHandlePosition(e[n].to),e[n].positionTo={x:o.x,y:o.y}}},100)})},startDragNewLink:function(t){this.panEnabled=!1,this.newLink={startPortId:t}},getPortHandlePosition:function(t){if(this.$refs["port-"+t]){var e,n,o=this.$refs["port-"+t][0],i=this.$refs["node-"+o.nodeIndex][0];return"in"===o.type?(e=i.x+10,n=i.y+o.y+64):(e=i.x+i.width+10,n=i.y+o.y+64),{x:e,y:n}}return console.warn('port "'+t+'" not found. you must call this method after the first render'),0},mouseMove:function(t){var e=this.model._model.links;if(this.mouseX=t.x,this.mouseY=t.y,this.draggedItem){var n=this.draggedItem.index,o=this.draggedItem.type;if("points"===o){var i=this.convertXYtoViewPort(this.mouseX,this.mouseY);i.x=j(i.x,this.gridSnap)-this.gridSnap/2,i.y=j(i.y,this.gridSnap),e[this.draggedItem.linkIndex].points[this.draggedItem.pointIndex].x=i.x,e[this.draggedItem.linkIndex].points[this.draggedItem.pointIndex].y=i.y,this.updateLinksPositions()}else{var r=this.convertXYtoViewPort(this.mouseX,this.mouseY);r.x=j(r.x,this.gridSnap)-this.gridSnap/2,r.y=j(r.y,this.gridSnap),this.model._model[o][n].x=r.x-30,this.model._model[o][n].y=r.y-30,this.updateLinksPositions()}}},mouseUp:function(){this.draggedItem=void 0,this.newLink=void 0},mouseUpPort:function(t){var e=this.model._model.links;if(this.draggedItem&&"points"===this.draggedItem.type){console.log(this.draggedItem);var n=this.draggedItem.pointIndex,o=this.draggedItem.linkIndex;if("in"===this.$refs["port-"+t][0].type){var i=e[o].points.length;e[o].points.splice(n,i-this.draggedItem.pointIndex)}else e[o].points.splice(0,n+1);this.updateLinksPositions()}if(void 0!==this.newLink){var r=this.newLink.startPortId,s=t,a=this.$refs["port-"+r][0],d=this.$refs["port-"+s][0];"in"===a.type&&"out"===d.type?e.push({id:Y(),from:d.id,to:a.id,positionFrom:{},positionTo:{},points:[]}):"in"===d.type&&"out"===a.type?e.push({id:Y(),from:a.id,to:d.id,positionFrom:{},positionTo:{},points:[]}):console.warn("You must link one out port and one in port"),this.model._model.links=e,this.updateLinksPositions()}},startDragPoint:function(t){console.log("startDragPoint",t),this.draggedItem=t},startDragItem:function(t,e,n){this.panEnabled=!1,this.draggedItem=t,this.selectedItem=t,this.initialDragX=e,this.initialDragY=n}},computed:{querySelector:function(){return document.querySelector("#viewport")}},watch:{"model._model.links":function(){this.updateLinksPositions()}}},X={Diagram:B,install:function(t){t.component("diagram",B)}},z=Object.freeze({default:X,Diagram:B,DiagramModel:O});"undefined"!=typeof window&&window.Vue&&window.Vue.use(X),t.default=z,Object.defineProperty(t,"__esModule",{value:!0})});
